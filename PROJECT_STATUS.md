# Axiom é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

> **æœ€åæ›´æ–°**: 2024-12-19  
> **é¡¹ç›®é˜¶æ®µ**: åŸºç¡€æ¡†æ¶å®Œæˆï¼Œç­‰å¾… AI é›†æˆ

---

## ğŸ“‹ ç›®å½•

- [å·²å®ŒæˆåŠŸèƒ½](#å·²å®ŒæˆåŠŸèƒ½)
- [å¾…å®ç°åŠŸèƒ½](#å¾…å®ç°åŠŸèƒ½)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [ä¸‹ä¸€æ­¥è®¡åˆ’](#ä¸‹ä¸€æ­¥è®¡åˆ’)

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

#### 1. **æ•°æ®åº“è®¾è®¡**
- âœ… **Canvas è¡¨**: å­˜å‚¨å­¦ä¹ ç©ºé—´ï¼ˆid, title, domain, status, created_atï¼‰
- âœ… **Module è¡¨**: å­˜å‚¨æ¨¡å—ï¼ˆid, canvas_id, type, status, order_index, width, heightï¼‰
- âœ… **ModuleVersion è¡¨**: å­˜å‚¨æ¨¡å—ç‰ˆæœ¬å†å²ï¼ˆid, module_id, prompt, content_json, created_atï¼‰
- âœ… å¤–é”®çº¦æŸå’Œç´¢å¼•ä¼˜åŒ–
- âœ… SQLite æ•°æ®åº“æŒä¹…åŒ–

#### 2. **åç«¯ API ç³»ç»Ÿ**
- âœ… **Express æœåŠ¡å™¨** (ç«¯å£ 3001)
- âœ… **ç»Ÿä¸€å†…å®¹åè®®** (Content JSON): æ”¯æŒ text, quiz, video, html_animation, interactive_app
- âœ… **æ ¸å¿ƒ API ç«¯ç‚¹**:
  - `POST /api/canvases` - åˆ›å»º Canvas + ç”Ÿæˆåˆå§‹æ¨¡å—
  - `GET /api/canvases/:id` - è·å– Canvas è¯¦æƒ…
  - `POST /api/modules/:id/edit` - ç¼–è¾‘å•ä¸ªæ¨¡å—ï¼ˆåˆ›å»ºæ–°ç‰ˆæœ¬ï¼‰
  - `POST /api/canvases/:id/expand` - æ‰©å±• Canvasï¼ˆæ·»åŠ æ¨¡å—ï¼‰
  - `POST /api/canvases/:id/new` - å½’æ¡£æ—§ Canvasï¼Œåˆ›å»ºæ–°çš„
  - `POST /api/interact` - **ç»Ÿä¸€æ™ºèƒ½äº¤äº’æ¥å£**ï¼ˆAI åˆ¤æ–­æ„å›¾ï¼‰
  - `PUT /api/modules/reorder` - æ›´æ–°æ¨¡å—é¡ºåº
  - `PUT /api/modules/:id/size` - æ›´æ–°æ¨¡å—å°ºå¯¸

#### 3. **Planner ç³»ç»Ÿ** âœ… å·²å®Œæˆå‡çº§ï¼
- âœ… **å‡ Plannerï¼ˆè§„åˆ™å¼•æ“ï¼‰**: 
  - generateModulePlan(): å›ºå®šæ¨¡æ¿ï¼ˆå·²è¢«æ›¿ä»£ï¼‰
  - generateModuleContent(): ç”Ÿæˆå‡æ•°æ®ï¼ˆä»åœ¨ä½¿ç”¨ï¼‰
  - analyzeIntent(): ç®€å•å…³é”®è¯åŒ¹é…ï¼ˆä»åœ¨ä½¿ç”¨ï¼‰
  
- âœ… **çœŸæ­£çš„ Gemini Plannerï¼ˆç‹¬ç«‹æµ‹è¯•å®Œæˆï¼‰**:
  - generateModulePlanWithGemini(): ä½¿ç”¨ Gemini 3 Flash + Medium Thinking
  - æ”¯æŒ 27+ ç§æ¨¡å—ç±»å‹ï¼ˆåŒ…æ‹¬è·¨å­¦ç§‘è§†è§’ï¼‰
  - åŠ¨æ€æ¨¡å—æ•°é‡ï¼ˆ3-7 ä¸ªï¼‰
  - é€šè¿‡ 20 æ¡éªŒè¯æµ‹è¯•ï¼ˆ100% é€šè¿‡ç‡ï¼‰
  - ç”Ÿæˆåˆ›æ„æ ‡é¢˜å’Œè¯¦ç»†æè¿°
  - **çŠ¶æ€**: â³ å·²æµ‹è¯•éªŒè¯ï¼Œç­‰å¾…æ¥å…¥ä¸»ç³»ç»Ÿ

### ğŸ¨ å‰ç«¯åŠŸèƒ½

#### 4. **Canvas é¡µé¢ç³»ç»Ÿ**
- âœ… **CanvasPage ç»„ä»¶**: å®Œæ•´çš„ Canvas å±•ç¤ºé¡µé¢
- âœ… **ModuleCard ç»„ä»¶**: æ¨¡å—å¡ç‰‡ï¼Œæ”¯æŒå¤šç§å†…å®¹ç±»å‹æ¸²æŸ“
- âœ… **ç¬”è®°æœ¬é£æ ¼èƒŒæ™¯**: æ ¼å­çº¸æ•ˆæœï¼ˆä»… Canvas é¡µé¢ï¼‰
- âœ… **ç¬”è®°æ‰‹ç¨¿å¼æ ‡é¢˜**: å·¦å¯¹é½ï¼Œå¤§æ ‡é¢˜ + å¯¼è¯­æ®µè½

#### 5. **äº¤äº’åŠŸèƒ½**
- âœ… **æ¨¡å—æ‹–æ‹½æ’åº**: ä½¿ç”¨ @dnd-kitï¼Œæ”¯æŒé”®ç›˜å¯¼èˆª
- âœ… **æ¨¡å—è‡ªç”±ç¼©æ”¾**: ä½¿ç”¨ re-resizableï¼Œå³ä¸‹è§’æ‹–æ‹½è°ƒæ•´å¤§å°
- âœ… **æç®€ç¼–è¾‘ä½“éªŒ**:
  - ç‚¹å‡»æ ‡é¢˜æˆ–å·¦ä¸‹è§’é“…ç¬”å›¾æ ‡è¿›å…¥ç¼–è¾‘
  - åº•éƒ¨è¾“å…¥æ¡†å±•å¼€ï¼Œæ”¯æŒ Enter æäº¤ã€Esc é€€å‡º
  - å±€éƒ¨åˆ·æ–°ï¼ˆåªæ›´æ–°è¯¥æ¨¡å—ï¼‰
- âœ… **ç»Ÿä¸€æ™ºèƒ½è¾“å…¥æ¡†**: åº•éƒ¨æ‚¬æµ®ï¼ŒAI è‡ªåŠ¨åˆ¤æ–­æ˜¯æ‰©å±•è¿˜æ˜¯æ–°å»º

#### 6. **UI/UX ä¼˜åŒ–**
- âœ… **æç®€å¯¼èˆªæ **: å·¦ä¸Šè§’å“ç‰Œæ ‡å¿—ï¼Œå³ä¸Šè§’"Start New Exploration"
- âœ… **åˆ é™¤å†—ä½™åŠŸèƒ½**: ç§»é™¤äº† SocraticMentorï¼ˆé—®å·æŒ‰é’®ï¼‰
- âœ… **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**: æ ‡é¢˜ã€å¯¼è¯­ã€æ¨¡å—å¡ç‰‡å½¢æˆæ¸…æ™°çš„é˜…è¯»æµ
- âœ… **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸åŒå±å¹•å°ºå¯¸

### ğŸ”§ å¼€å‘å·¥å…·

#### 7. **å¼€å‘ç¯å¢ƒ**
- âœ… **å‰åç«¯åˆ†ç¦»**: Vite (å‰ç«¯) + Express (åç«¯)
- âœ… **çƒ­é‡è½½**: å‰åç«¯éƒ½æ”¯æŒè‡ªåŠ¨åˆ·æ–°
- âœ… **TypeScript**: ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨
- âœ… **API æµ‹è¯•è„šæœ¬**: `test-api.sh`

---

## âŒ å¾…å®ç°åŠŸèƒ½

### ğŸ¤– AI é›†æˆï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

#### 1. **çœŸæ­£çš„ Gemini Planner** âœ… å·²å®Œæˆï¼
- âœ… å®ç°äº† `generateModulePlanWithGemini()` å‡½æ•°
- âœ… ä½¿ç”¨ Gemini 3 Flash + Medium Thinking
- âœ… æ”¯æŒè·¨å­¦ç§‘æ¨¡å—ç±»å‹ï¼ˆ27+ ç§ï¼‰
- âœ… åŠ¨æ€æ¨¡å—æ•°é‡ï¼ˆ3-6 ä¸ªï¼‰
- âœ… é€šè¿‡ 20 æ¡éªŒè¯æµ‹è¯•ï¼ˆ100% é€šè¿‡ç‡ï¼‰
- â³ å¾…æ¥å…¥ï¼šæ›¿æ¢ `server/planner.ts` ä¸­çš„å‡å‡½æ•°

#### 2. **å†…å®¹ç”Ÿæˆ API çŸ©é˜µ**ï¼ˆPlanner çš„æ‰§è¡Œå±‚ï¼‰

Planner ä¼šåˆ†é…ä¸åŒç±»å‹çš„æ¨¡å—ï¼Œæ¯ç§éƒ½éœ€è¦å¯¹åº”çš„å†…å®¹ç”Ÿæˆ APIï¼š

##### 2.1 åŸºç¡€æ–‡æœ¬å†…å®¹ç”Ÿæˆ API âœ… å·²å®Œæˆæµ‹è¯•ï¼
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šdefinition, intuition, overview, examples
- âœ… å®ç° `generateTextContent(topic, domain, moduleType, modulePlan)`
- âœ… ä½¿ç”¨ Gemini 2.5 Flashï¼ˆé€Ÿåº¦å¿«ï¼Œè´¨é‡é«˜ï¼‰
- âœ… è¾“å‡ºï¼štitle, body (markdown), key_points[], difficulty_level, reading_time
- âœ… æ”¯æŒä¸­è‹±æ–‡æ··åˆ
- âœ… å·²æµ‹è¯•éªŒè¯ï¼ˆphotosynthesis / intuitionï¼‰
- âœ… è´¨é‡è¯„ä¼°ï¼šå¼€åœºå¼•äººå…¥èƒœï¼ŒåŒè¯­è‡ªç„¶ï¼Œç»“æ„æ¸…æ™°
- â³ å¾…æ¥å…¥ï¼šé›†æˆåˆ°ä¸»ç³»ç»Ÿ
- **ä¼˜å…ˆçº§**ï¼šğŸ”´ æœ€é«˜ï¼ˆæœ€å¸¸ç”¨ï¼‰

##### 2.2 æ•…äº‹å™äº‹ç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šstory
- âŒ å®ç° `generateStoryContent(topic, domain, context, characters?)`
- âŒ ä½¿ç”¨ Gemini 1.5 Proï¼ˆåˆ›æ„å†™ä½œï¼‰
- âŒ è¾“å‡ºï¼šnarrative_text, key_sentence, illustration_prompts[]
- âŒ æ”¯æŒå¤šç§å™äº‹é£æ ¼ï¼ˆç§‘æ™®ã€å¯“è¨€ã€å†å²ï¼‰
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­ç­‰

##### 2.3 äº¤äº’å®éªŒç”Ÿæˆ API â­
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šexperiment, manipulation
- âŒ å®ç° `generateExperimentContent(topic, domain, variables)`
- âŒ ä½¿ç”¨ Gemini 3 Flashï¼ˆç»“æ„åŒ–ç”Ÿæˆï¼‰
- âŒ è¾“å‡ºï¼š
  ```typescript
  {
    variables: [{ name, label, min, max, default, unit }],
    visualization_type: 'chart' | 'animation' | '3d',
    result_formula: string,
    explanation: string
  }
  ```
- âŒ æ”¯æŒå¯è°ƒå‚æ•°å®šä¹‰
- **ä¼˜å…ˆçº§**ï¼šğŸ”´ æœ€é«˜ï¼ˆPRD æ ¸å¿ƒç‰¹æ€§ï¼‰

##### 2.4 æ•°å­¦å…¬å¼ç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šformula, perspective_mathematics
- âŒ å®ç° `generateFormulaContent(topic, concept, derivation_level)`
- âŒ ä½¿ç”¨ Gemini 1.5 Pro
- âŒ è¾“å‡ºï¼šLaTeX å…¬å¼ã€é€æ­¥æ¨å¯¼ã€ç¬¦å·å¯¹åº”è¡¨
- âŒ æ”¯æŒå¯æŠ˜å çš„æ¨å¯¼æ­¥éª¤
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­ç­‰

##### 2.5 æµ‹éªŒç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šquiz, challenge
- âŒ å®ç° `generateQuizContent(topic, difficulty, question_count)`
- âŒ ä½¿ç”¨ Gemini 3 Flashï¼ˆå¿«é€Ÿç”Ÿæˆï¼‰
- âŒ è¾“å‡ºï¼š
  ```typescript
  {
    questions: [{
      question: string,
      options: string[],
      answer_index: number,
      explanation: string,
      difficulty: 'easy' | 'medium' | 'hard'
    }]
  }
  ```
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¢ æ™®é€š

##### 2.6 è·¨å­¦ç§‘è§†è§’ç”Ÿæˆ API â­
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šperspective_physics, perspective_chemistry, perspective_biology, etc.
- âŒ å®ç° `generatePerspectiveContent(topic, discipline, other_perspectives?)`
- âŒ ä½¿ç”¨ Gemini 1.5 Proï¼ˆéœ€è¦æ·±åº¦ç†è§£ï¼‰
- âŒ è¾“å‡ºï¼šå­¦ç§‘ç‰¹å®šçš„è§£é‡Šã€å…³é”®æ¦‚å¿µã€ä¸å…¶ä»–å­¦ç§‘çš„è¿æ¥
- âŒ æ”¯æŒ"lens switcher"ï¼ˆè§†è§’åˆ‡æ¢ï¼‰UI
- **ä¼˜å…ˆçº§**ï¼šğŸ”´ æœ€é«˜ï¼ˆPRD ç‹¬ç‰¹å–ç‚¹ï¼‰

##### 2.7 æ¸¸æˆåŒ–å†…å®¹ç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šgame
- âŒ å®ç° `generateGameContent(topic, game_type, difficulty)`
- âŒ ä½¿ç”¨ Gemini 3 Flash
- âŒ è¾“å‡ºï¼šæ¸¸æˆè§„åˆ™ã€å…³å¡è®¾è®¡ã€å¥–åŠ±æœºåˆ¶
- âŒ æ”¯æŒå¤šç§æ¸¸æˆç±»å‹ï¼ˆåŒ¹é…ã€æ‹¼å›¾ã€æ¨¡æ‹Ÿï¼‰
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¢ æ™®é€š

##### 2.8 åœºæ™¯/æƒ…å¢ƒç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šscenario
- âŒ å®ç° `generateScenarioContent(topic, context, user_role)`
- âŒ ä½¿ç”¨ Gemini 1.5 Pro
- âŒ è¾“å‡ºï¼šåœºæ™¯æè¿°ã€å¯¹è¯é€‰é¡¹ã€åé¦ˆé€»è¾‘
- âŒ æ”¯æŒè¯­è¨€å­¦ä¹ åœºæ™¯å’Œç§‘å­¦åº”ç”¨åœºæ™¯
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­ç­‰

##### 2.9 å¯¹æ¯”åˆ†æç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šcomparison
- âŒ å®ç° `generateComparisonContent(topic, items_to_compare)`
- âŒ ä½¿ç”¨ Gemini 3 Flash
- âŒ è¾“å‡ºï¼šå¯¹æ¯”è¡¨æ ¼ã€ç›¸ä¼¼ç‚¹ã€å·®å¼‚ç‚¹ã€å…³é”®æ´å¯Ÿ
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¢ æ™®é€š

##### 2.10 æ—¶é—´çº¿ç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼štimeline
- âŒ å®ç° `generateTimelineContent(topic, start_date?, end_date?)`
- âŒ ä½¿ç”¨ Gemini 3 Flash
- âŒ è¾“å‡ºï¼šæ—¶é—´èŠ‚ç‚¹æ•°ç»„ã€äº‹ä»¶æè¿°ã€å› æœå…³ç³»
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¢ æ™®é€š

##### 2.11 è§†é¢‘ç”Ÿæˆ APIï¼ˆç¬¬ä¸‰æ–¹é›†æˆï¼‰
**ç”¨äºæ¨¡å—ç±»å‹**ï¼švideo
- âŒ é›†æˆ Runway / Pika / Veo ç­‰è§†é¢‘ç”ŸæˆæœåŠ¡
- âŒ è¾“å…¥ï¼šscript, visual_description, duration
- âŒ è¾“å‡ºï¼švideo_url, thumbnail_url, subtitles
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­ç­‰ï¼ˆåç»­é˜¶æ®µï¼‰

##### 2.12 å›¾åƒç”Ÿæˆ API
**ç”¨äºæ¨¡å—ç±»å‹**ï¼šæ‰€æœ‰ç±»å‹çš„é…å›¾
- âŒ é›†æˆ Imagen / DALL-E / Stable Diffusion
- âŒ è¾“å…¥ï¼šdescription, style, size
- âŒ è¾“å‡ºï¼šimage_url
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­ç­‰

#### 3. **æ™ºèƒ½æ„å›¾åˆ†æ**
- âŒ æ›¿æ¢ `analyzeIntent()` å‡½æ•°
- âŒ ä½¿ç”¨ Gemini æ›´å‡†ç¡®åœ°åˆ¤æ–­ç”¨æˆ·æ˜¯æƒ³æ‰©å±•è¿˜æ˜¯æ–°å»º
- âŒ ä»ç”¨æˆ·è¾“å…¥ä¸­æå–æ–°ä¸»é¢˜å’Œé¢†åŸŸ

---

### ğŸ—ï¸ å†…å®¹ç”Ÿæˆæ¶æ„è®¾è®¡

#### å®Œæ•´å·¥ä½œæµç¨‹å›¾

```
ç”¨æˆ·è¾“å…¥ï¼š"photosynthesis" + é€‰æ‹©é¢†åŸŸ "SCIENCE"
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Gemini Planner (âœ… å·²å®Œæˆæµ‹è¯•)       â”‚
â”‚   - ä½¿ç”¨ Gemini 3 Flash                â”‚
â”‚   - Medium Thinking çº§åˆ«               â”‚
â”‚   å†³å®šï¼šç”Ÿæˆå“ªäº›æ¨¡å—ï¼Ÿ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
è¾“å‡ºæ¨¡å—è®¡åˆ’ (5-6ä¸ªæ¨¡å—):
[
  { type: "intuition", title: "Solar Powered Life", description: "..." },
  { type: "experiment", title: "The Bubble Factory", description: "..." },
  { type: "formula", title: "The Molecular Kitchen", description: "..." },
  { type: "perspective_chemistry", title: "Chemical Reactions in Cells", description: "..." },
  { type: "quiz", title: "The Botanist's Challenge", description: "..." }
]
         â†“
æ ¹æ® type åˆ†å‘ç»™ä¸åŒçš„å†…å®¹ç”Ÿæˆå™¨ï¼š
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡æœ¬ç”Ÿæˆå™¨   â”‚  å®éªŒç”Ÿæˆå™¨   â”‚  å…¬å¼ç”Ÿæˆå™¨   â”‚  è§†è§’ç”Ÿæˆå™¨   â”‚  æµ‹éªŒç”Ÿæˆå™¨   â”‚
â”‚     API      â”‚     API      â”‚     API      â”‚     API      â”‚     API      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… å·²æµ‹è¯•    â”‚ âŒ å¾…å®ç°    â”‚ âŒ å¾…å®ç°    â”‚ âŒ å¾…å®ç°    â”‚ âŒ å¾…å®ç°    â”‚
â”‚              â”‚              â”‚              â”‚              â”‚              â”‚
â”‚â€¢ intuition   â”‚â€¢ experiment  â”‚â€¢ formula     â”‚â€¢ perspective_â”‚â€¢ quiz        â”‚
â”‚â€¢ definition  â”‚â€¢ manipulationâ”‚              â”‚  chemistry   â”‚â€¢ challenge   â”‚
â”‚â€¢ overview    â”‚â€¢ game        â”‚              â”‚â€¢ perspective_â”‚              â”‚
â”‚â€¢ examples    â”‚              â”‚              â”‚  physics     â”‚              â”‚
â”‚              â”‚              â”‚              â”‚â€¢ perspective_â”‚              â”‚
â”‚              â”‚              â”‚              â”‚  biology     â”‚              â”‚
â”‚              â”‚              â”‚              â”‚â€¢ perspective_â”‚              â”‚
â”‚              â”‚              â”‚              â”‚  mathematics â”‚              â”‚
â”‚              â”‚              â”‚              â”‚â€¢ perspective_â”‚              â”‚
â”‚              â”‚              â”‚              â”‚  history     â”‚              â”‚
â”‚              â”‚              â”‚              â”‚  ...etc      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
ä¸ºæ¯ä¸ªæ¨¡å—ç”Ÿæˆå…·ä½“å†…å®¹ (content_json):
{
  "type": "text",
  "title": "Solar Powered Life: How Plants Make Their Own Food",
  "body": "# Solar Powered Life...(å®Œæ•´ Markdown å†…å®¹)",
  "key_points": ["è¦ç‚¹1", "è¦ç‚¹2", ...]
}
         â†“
å­˜å‚¨åˆ°æ•°æ®åº“ (ModuleVersion è¡¨)
         â†“
å‰ç«¯ ModuleCard ç»„ä»¶æ¸²æŸ“
```

#### æ¶æ„è¯´æ˜

**ç¬¬ä¸€å±‚ï¼šPlannerï¼ˆè§„åˆ’å™¨ï¼‰**
- è¾“å…¥ï¼štopic + domain
- è¾“å‡ºï¼šæ¨¡å—è®¡åˆ’åˆ—è¡¨
- èŒè´£ï¼šå†³å®š"è¦ç”Ÿæˆå“ªäº›ç±»å‹çš„æ¨¡å—"
- çŠ¶æ€ï¼šâœ… å·²å®Œæˆæµ‹è¯•ï¼ˆGemini 3 Flashï¼‰

**ç¬¬äºŒå±‚ï¼šContent Generatorsï¼ˆå†…å®¹ç”Ÿæˆå™¨çŸ©é˜µï¼‰**
- è¾“å…¥ï¼štopic + domain + modulePlan
- è¾“å‡ºï¼šcontent_json
- èŒè´£ï¼šæ ¹æ®æ¨¡å—ç±»å‹ç”Ÿæˆå…·ä½“å†…å®¹
- çŠ¶æ€ï¼š
  - âœ… æ–‡æœ¬ç”Ÿæˆå™¨ï¼ˆå·²æµ‹è¯•ï¼‰
  - âŒ å…¶ä»–ç”Ÿæˆå™¨ï¼ˆå¾…å®ç°ï¼‰

**ç¬¬ä¸‰å±‚ï¼šå­˜å‚¨å’Œæ¸²æŸ“**
- å°†ç”Ÿæˆçš„å†…å®¹ä¿å­˜åˆ°æ•°æ®åº“
- å‰ç«¯æ ¹æ® content_json.type æ¸²æŸ“ä¸åŒç»„ä»¶

#### å…³é”®ç†è§£ï¼šä¸€å¯¹å¤šçš„å…³ç³»

**1 ä¸ª Planner â†’ å¤šä¸ª Content Generators**

- Planner æ˜¯"æ€»æŒ‡æŒ¥"ï¼Œå†³å®šæ•´ä½“å­¦ä¹ è·¯å¾„
- æ¯ä¸ª Content Generator æ˜¯"ä¸“å®¶"ï¼Œè´Ÿè´£ç”Ÿæˆç‰¹å®šç±»å‹çš„å†…å®¹

**ä¸¾ä¾‹è¯´æ˜**ï¼š

ç”¨æˆ·æœç´¢ "photosynthesis"
â†’ Planner å†³å®šï¼šéœ€è¦ 5 ä¸ªæ¨¡å—
  - intuition â†’ è°ƒç”¨**æ–‡æœ¬ç”Ÿæˆå™¨**
  - experiment â†’ è°ƒç”¨**å®éªŒç”Ÿæˆå™¨**
  - formula â†’ è°ƒç”¨**å…¬å¼ç”Ÿæˆå™¨**
  - perspective_chemistry â†’ è°ƒç”¨**è§†è§’ç”Ÿæˆå™¨**
  - quiz â†’ è°ƒç”¨**æµ‹éªŒç”Ÿæˆå™¨**

æ¯ä¸ªç”Ÿæˆå™¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæœ‰è‡ªå·±çš„ prompt å·¥ç¨‹å’Œè¾“å‡ºæ ¼å¼ã€‚

---

#### API ä¼˜å…ˆçº§å»ºè®®

**Phase 1 - æ ¸å¿ƒä¸‰ä»¶å¥—**ï¼ˆMVPï¼‰
1. ğŸ”´ åŸºç¡€æ–‡æœ¬å†…å®¹ç”Ÿæˆ API
2. ğŸ”´ äº¤äº’å®éªŒç”Ÿæˆ API  
3. ğŸ”´ è·¨å­¦ç§‘è§†è§’ç”Ÿæˆ API

å®Œæˆè¿™ä¸‰ä¸ªï¼Œå°±èƒ½æ”¯æ’‘ 80% çš„æ¨¡å—ç±»å‹ã€‚

**Phase 2 - éªŒè¯å¢å¼º**
4. ğŸŸ¡ æµ‹éªŒç”Ÿæˆ API
5. ğŸŸ¡ æ•…äº‹ç”Ÿæˆ API
6. ğŸŸ¡ å…¬å¼æ¨å¯¼ç”Ÿæˆ API

**Phase 3 - å¤šæ¨¡æ€æ‰©å±•**
7. ğŸŸ¢ è§†é¢‘ç”Ÿæˆ API
8. ğŸŸ¢ æ¸¸æˆåŒ–å†…å®¹ç”Ÿæˆ API
9. ğŸŸ¢ å›¾åƒç”Ÿæˆ API

---

### ğŸ¬ å†…å®¹ç±»å‹æ‰©å±•

#### 4. **è§†é¢‘ç”Ÿæˆ**
- âŒ é›†æˆè§†é¢‘ç”Ÿæˆ APIï¼ˆå¦‚ Runwayã€Pika ç­‰ï¼‰
- âŒ å®ç° `VideoContent` çš„çœŸå®æ¸²æŸ“
- âŒ è§†é¢‘ç¼©ç•¥å›¾å’Œæ’­æ”¾æ§åˆ¶

#### 5. **HTML åŠ¨ç”»**
- âŒ å®ç°äº¤äº’å¼ HTML åŠ¨ç”»ç»„ä»¶
- âŒ ç§‘å­¦å®éªŒå¯è§†åŒ–ï¼ˆå¦‚åŒ–å­¦ååº”ã€ç‰©ç†æ¨¡æ‹Ÿï¼‰
- âŒ æ•°æ®å¯è§†åŒ–å›¾è¡¨

#### 6. **äº¤äº’å¼åº”ç”¨**
- âŒ å®ç°çœŸæ­£çš„äº¤äº’å¼å®éªŒç•Œé¢
- âŒ å‚æ•°è°ƒèŠ‚å’Œå®æ—¶åé¦ˆ
- âŒ 3D æ¨¡å‹å±•ç¤ºï¼ˆå¦‚åˆ†å­ç»“æ„ã€å‡ ä½•ä½“ï¼‰

### ğŸ“š åŠŸèƒ½å¢å¼º

#### 7. **ç‰ˆæœ¬å†å²ç®¡ç†**
- âŒ å‰ç«¯ UI æ˜¾ç¤ºæ¨¡å—ç‰ˆæœ¬å†å²
- âŒ ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½
- âŒ ç‰ˆæœ¬å›æ»šåŠŸèƒ½

#### 8. **Canvas ç®¡ç†**
- âŒ Canvas å½’æ¡£åˆ—è¡¨æŸ¥çœ‹
- âŒ æ¢å¤å½’æ¡£çš„ Canvas
- âŒ Canvas æœç´¢å’Œç­›é€‰

#### 9. **ç”¨æˆ·ç³»ç»Ÿ**
- âŒ ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•/æ³¨å†Œï¼‰
- âŒ å¤šç”¨æˆ·æ”¯æŒ
- âŒ ä¸ªäººå­¦ä¹ å†å²
- âŒ æ”¶è—å’Œåˆ†äº«åŠŸèƒ½

### ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### 10. **æ€§èƒ½ä¼˜åŒ–**
- âŒ æ¨¡å—æ‡’åŠ è½½
- âŒ è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡æ¨¡å—æ—¶ï¼‰
- âŒ API å“åº”ç¼“å­˜
- âŒ å›¾ç‰‡å’Œè§†é¢‘ CDN ä¼˜åŒ–

#### 11. **å¯è®¿é—®æ€§**
- âŒ å®Œæ•´çš„é”®ç›˜å¯¼èˆªæ”¯æŒ
- âŒ å±å¹•é˜…è¯»å™¨æ”¯æŒ
- âŒ é«˜å¯¹æ¯”åº¦æ¨¡å¼
- âŒ å¤šè¯­è¨€ç•Œé¢

#### 12. **ç§»åŠ¨ç«¯é€‚é…**
- âŒ å“åº”å¼å¸ƒå±€ä¼˜åŒ–
- âŒ è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒï¼ˆæ‹–æ‹½ã€ç¼©æ”¾ï¼‰
- âŒ ç§»åŠ¨ç«¯ä¸“ç”¨äº¤äº’æ¨¡å¼

---

## ğŸ¯ å½“å‰æœ€ç´§æ€¥çš„ä»»åŠ¡ï¼šå†…å®¹ç”Ÿæˆ API

Planner å·²å®Œæˆï¼Œç°åœ¨æœ€ç´§æ€¥çš„æ˜¯å®ç°**å†…å®¹ç”Ÿæˆ API**ï¼Œè®© Planner åˆ†é…çš„æ¨¡å—èƒ½å¤ŸçœŸæ­£ç”Ÿæˆå†…å®¹ã€‚

### ğŸ“‹ æ¨èå®æ–½é¡ºåº

#### ç¬¬ä¸€å‘¨ï¼šæ ¸å¿ƒä¸‰ä»¶å¥—ï¼ˆMVPï¼‰

##### 1ï¸âƒ£ åŸºç¡€æ–‡æœ¬å†…å®¹ç”Ÿæˆ API
```typescript
generateTextContent(
  topic: string,
  domain: string, 
  moduleType: string,
  moduleDescription: string
) â†’ { title, body, key_points[] }
```
- **è¦†ç›–æ¨¡å—ç±»å‹**: definition, intuition, overview, examples
- **ä½¿ç”¨æ¨¡å‹**: Gemini 1.5 Pro
- **è¾“å‡ºæ ¼å¼**: Markdown æ–‡æœ¬
- **é¢„è®¡å·¥ä½œé‡**: 2-3 å¤©

##### 2ï¸âƒ£ äº¤äº’å®éªŒç”Ÿæˆ API â­
```typescript
generateExperimentContent(
  topic: string,
  experimentDescription: string
) â†’ {
  variables: Variable[],
  visualization_config: any,
  formula: string,
  explanation: string
}
```
- **è¦†ç›–æ¨¡å—ç±»å‹**: experiment, manipulation
- **ä½¿ç”¨æ¨¡å‹**: Gemini 3 Flashï¼ˆç»“æ„åŒ–è¾“å‡ºï¼‰
- **è¾“å‡ºæ ¼å¼**: JSONï¼ˆå˜é‡å®šä¹‰ + å¯è§†åŒ–é…ç½®ï¼‰
- **é¢„è®¡å·¥ä½œé‡**: 3-4 å¤©
- **å…³é”®æŒ‘æˆ˜**: å®šä¹‰ç»Ÿä¸€çš„äº¤äº’åè®®

##### 3ï¸âƒ£ è·¨å­¦ç§‘è§†è§’ç”Ÿæˆ API â­
```typescript
generatePerspectiveContent(
  topic: string,
  discipline: string,  // physics, chemistry, biology, etc.
  mainContext: string
) â†’ {
  title: string,
  discipline_explanation: string,
  key_concepts: string[],
  connection_to_other_perspectives?: string
}
```
- **è¦†ç›–æ¨¡å—ç±»å‹**: perspective_physics, perspective_chemistry, etc.
- **ä½¿ç”¨æ¨¡å‹**: Gemini 1.5 Pro
- **è¾“å‡ºæ ¼å¼**: Structured text
- **é¢„è®¡å·¥ä½œé‡**: 2-3 å¤©
- **å…³é”®ç‰¹æ€§**: å±•ç¤ºåŒä¸€ç°è±¡çš„ä¸åŒå­¦ç§‘è§£é‡Š

#### ç¬¬äºŒå‘¨ï¼šéªŒè¯å’Œå™äº‹

##### 4ï¸âƒ£ æµ‹éªŒç”Ÿæˆ API
```typescript
generateQuizContent(
  topic: string,
  difficulty: string,
  moduleContext: string
) â†’ { questions: Question[] }
```
- **è¦†ç›–æ¨¡å—ç±»å‹**: quiz, challenge
- **ä½¿ç”¨æ¨¡å‹**: Gemini 3 Flash
- **é¢„è®¡å·¥ä½œé‡**: 1-2 å¤©

##### 5ï¸âƒ£ æ•…äº‹ç”Ÿæˆ API
```typescript
generateStoryContent(
  topic: string,
  story_type: string,
  constraints: any
) â†’ { narrative_text, illustration_prompts[] }
```
- **è¦†ç›–æ¨¡å—ç±»å‹**: story
- **ä½¿ç”¨æ¨¡å‹**: Gemini 1.5 Pro
- **é¢„è®¡å·¥ä½œé‡**: 2-3 å¤©

#### ç¬¬ä¸‰å‘¨ï¼šè¾…åŠ©åŠŸèƒ½

##### 6ï¸âƒ£ å…¶ä»–æ¨¡å—ç±»å‹
- å…¬å¼æ¨å¯¼ API
- å¯¹æ¯”åˆ†æ API
- æ—¶é—´çº¿ API
- åœºæ™¯ API

---

## ğŸ›ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
```
Express 4.18
â”œâ”€â”€ SQLite (better-sqlite3)
â”œâ”€â”€ TypeScript
â”œâ”€â”€ tsx (çƒ­é‡è½½)
â””â”€â”€ UUID (ID ç”Ÿæˆ)
```

### å‰ç«¯æŠ€æœ¯æ ˆ
```
React 19.2
â”œâ”€â”€ TypeScript
â”œâ”€â”€ Vite 6.2
â”œâ”€â”€ @dnd-kit (æ‹–æ‹½)
â”œâ”€â”€ re-resizable (ç¼©æ”¾)
â””â”€â”€ Tailwind CSS (æ ·å¼)
```

### æ•°æ®åº“ç»“æ„
```
canvases (ç”»å¸ƒ)
  â””â”€â”€ modules (æ¨¡å—)
      â””â”€â”€ module_versions (ç‰ˆæœ¬)
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### Phase 1: AI é›†æˆï¼ˆ1-2 å‘¨ï¼‰
1. **æ¥å…¥ Gemini 3 Flash**
   - å®ç°çœŸæ­£çš„ Planner
   - å®ç°å†…å®¹ç”Ÿæˆ
   - å®ç°æ„å›¾åˆ†æ

2. **æµ‹è¯•å’Œä¼˜åŒ–**
   - æµ‹è¯•ä¸åŒé¢†åŸŸçš„ç”Ÿæˆæ•ˆæœ
   - ä¼˜åŒ– prompt å·¥ç¨‹
   - å¤„ç†é”™è¯¯å’Œè¾¹ç•Œæƒ…å†µ

### Phase 2: å†…å®¹æ‰©å±•ï¼ˆ2-3 å‘¨ï¼‰
1. **è§†é¢‘ç”Ÿæˆé›†æˆ**
2. **äº¤äº’å¼å®éªŒç»„ä»¶**
3. **HTML åŠ¨ç”»ç³»ç»Ÿ**

### Phase 3: åŠŸèƒ½å®Œå–„ï¼ˆ2-3 å‘¨ï¼‰
1. **ç‰ˆæœ¬å†å² UI**
2. **Canvas ç®¡ç†**
3. **ç”¨æˆ·ç³»ç»Ÿ**

### Phase 4: ä¼˜åŒ–å’Œå‘å¸ƒï¼ˆ1-2 å‘¨ï¼‰
1. **æ€§èƒ½ä¼˜åŒ–**
2. **ç§»åŠ¨ç«¯é€‚é…**
3. **æ–‡æ¡£å®Œå–„**
4. **éƒ¨ç½²ä¸Šçº¿**

---

## ğŸ“Š å½“å‰ä»£ç ç»Ÿè®¡

- **æ€»æ–‡ä»¶æ•°**: ~30 ä¸ª
- **ä»£ç è¡Œæ•°**: ~8,000+ è¡Œ
- **API ç«¯ç‚¹**: 8 ä¸ª
- **React ç»„ä»¶**: 7 ä¸ª
- **æ•°æ®åº“è¡¨**: 3 ä¸ª

---

## ğŸ¯ æ ¸å¿ƒæˆå°±

âœ… **å®Œæ•´çš„æ¨¡å—åŒ–æ¶æ„** - Canvas â†’ Module â†’ Version ä¸‰å±‚ç»“æ„  
âœ… **ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ** - æ¯æ¬¡ç¼–è¾‘åˆ›å»ºæ–°ç‰ˆæœ¬ï¼Œä¸è¦†ç›–å†å²  
âœ… **å±€éƒ¨åˆ·æ–°æœºåˆ¶** - ç¼–è¾‘æ¨¡å—æ—¶åªæ›´æ–°è¯¥æ¨¡å—ï¼Œä¸å½±å“å…¶ä»–  
âœ… **è‡ªç”±æ’ç‰ˆç³»ç»Ÿ** - æ‹–æ‹½æ’åº + è‡ªç”±ç¼©æ”¾ï¼Œæ”¯æŒå¹¶æ’å¸ƒå±€  
âœ… **ç»Ÿä¸€äº¤äº’åè®®** - AI è‡ªåŠ¨åˆ¤æ–­ç”¨æˆ·æ„å›¾ï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©  
âœ… **ä¼˜é›…çš„ UI è®¾è®¡** - ç¬”è®°æœ¬é£æ ¼ï¼Œæç®€äº¤äº’ï¼Œé«˜çº§æ„Ÿåè¶³  
âœ… **Gemini 3 Flash Planner** - æ™ºèƒ½æ¨¡å—è§„åˆ’ï¼Œæ”¯æŒ 27+ ç§æ¨¡å—ç±»å‹ï¼Œ100% æµ‹è¯•é€šè¿‡ç‡  
âœ… **Gemini 2.5 Flash å†…å®¹ç”Ÿæˆå™¨** - åŸºç¡€æ–‡æœ¬å†…å®¹ç”Ÿæˆï¼ŒåŒè¯­æ”¯æŒï¼Œè´¨é‡å‡ºè‰²  

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

1. **å‡æ•°æ®ç­–ç•¥**: å…ˆç”¨ hardcode è·‘é€šæµç¨‹ï¼Œåç»­ä¸€æ¬¡æ€§æ›¿æ¢æˆ AI
2. **ä¹è§‚æ›´æ–°**: æ‹–æ‹½å’Œç¼–è¾‘ç«‹å³çœ‹åˆ°ç»“æœï¼Œä¸ç­‰å¾…æœåŠ¡å™¨
3. **ç±»å‹å®‰å…¨**: TypeScript ç«¯åˆ°ç«¯ï¼ŒAPI å¥‘çº¦ä¿è¯
4. **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªåŠŸèƒ½éƒ½æ˜¯ç‹¬ç«‹æ¨¡å—ï¼Œæ˜“äºæ‰©å±•

---

## ğŸ“ æ³¨æ„äº‹é¡¹

âš ï¸ **å½“å‰ä½¿ç”¨å‡æ•°æ®**: æ‰€æœ‰å†…å®¹éƒ½å¸¦æœ‰ `ã€æ³¨ï¼šè¿™æ˜¯å‡æ•°æ®ã€‘` æ ‡è®°  
âš ï¸ **æ•°æ®åº“æ–‡ä»¶**: `data/axiom.db` å·²æ·»åŠ åˆ° `.gitignore`ï¼Œä¸ä¼šæäº¤åˆ° Git  
âš ï¸ **ç¯å¢ƒå˜é‡**: éœ€è¦é…ç½® `GEMINI_API_KEY`ï¼ˆç›®å‰æœªä½¿ç”¨ï¼‰  
âš ï¸ **ç«¯å£é…ç½®**: å‰ç«¯ 5173ï¼Œåç«¯ 3001  

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **å¿«é€Ÿå¯åŠ¨**: æŸ¥çœ‹ `README.md`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- **API æ–‡æ¡£**: æŸ¥çœ‹ `server/index.ts` ä¸­çš„æ³¨é‡Š
- **æ•°æ®åº“ç»“æ„**: æŸ¥çœ‹ `server/db.ts`

---

**é¡¹ç›®çŠ¶æ€**: ğŸŸ¢ åŸºç¡€æ¡†æ¶å®Œæˆï¼Œç­‰å¾… AI é›†æˆ  
**ä¸‹ä¸€æ­¥**: æ¥å…¥ Gemini 3 Flashï¼Œå®ç°çœŸæ­£çš„æ™ºèƒ½ç”Ÿæˆ

